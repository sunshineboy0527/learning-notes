### 数据库的基本概念
> 数据库的英文单词:DataBase 简称 :DB
> 什么是数据库？
> 用于存储和管理数据的仓库。

数据模型：
* 组成：数据结构，数据操作，数据完整性约束三要素。
* 类型：
    * 概念模型(信息模型)：对现实世界的抽象，描述信息结构。
    > 实体间的联系分为：一对一，一对多，多对多
    > 表示：E-R图等
    * 逻辑模型：利用计算机对数据进行建模。
    > 常见逻辑模型有：层次模型，网状模型，关系模型，面向对象模型
    * 物理模型：面向计算机系统的模型。

##### 数据库系统的结构：
数据库系统的三级模式结构：
* 外模式：又称子模式或用户模式，是三层结构的最外层，是数据库用户能够看到并允许使用的那部分数据的逻辑结构和特征的描述，是数据库用户的数据视图。
> 外模式是模式的子集，一个数据库可以有多个外模式。
* 模式：也称概念模式或概念视图，是数据库中全体数据的逻辑结构和特征的描述，是三层结构的中间层。
> 一个数据库只有一个模式，模式是数据的逻辑表示，它描述了数据库中存储的具体数据及其之间存在的联系。
* 内模式：又称存储模式或物理模式，是三层结构中的最内层，也是最靠近物理存储的一层。
> 内模式是对数据库存储结构的描述，是数据在数据库内部的表达方式。

##### 数据库的特点:
>    1. 持久化存储数据的。其实数据库就是一个文件系统
>    2. 方便存储和管理数据
>    3. 使用了统一的方式操作数据库 -- SQL

> 常见的数据库软件
>>    MySQL,Oracle,SQL Server

##### MySQL服务
> * 打开服务管理 cmd --> `services.msc`

##### MySQL目录结构
> 1. MySQL安装目录 `D:\develop\MySQL\MySQL Server 8.0\`
>> * 配置文件 `my.ini`
> 2. MySQL数据目录 `D:\develop\MySQL\MySQL Server 8.0\Data\`
>> * 数据库：文件夹
>> * 表：文件
>> * 数据：
>
> ![MySQL结构](\assets\mysql_stucture.png "MySQL结构")

---

##### SQL
> Structured Query Language:结构化查询语言
> 其实就是定义了操作所有关系型数据库的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”

##### SQL通用语法
* SQL 语句可以单行或多行书写，以分号结尾。
* 可使用空格和缩进来增强语句的可读性。
* MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写
* 3 种注释
    * 单行注释: `-- 注释内容` 或 `# 注释内容`
    * 多行注释：`/* 注释 */`
    > `# 注释内容`是MySQL特有的

##### MySQL分类
> ###### DDL(Data Definition Language)数据定义语言
>> 用来定义数据库对象:数据库，表，列等。关键字:create,drop,alter 等.
>> * 操作数据库：CRUD
>>> * C(Create)：创建
>>> * R(Retrieve)：查询
>>> * U(Update)：修改
>>> * D(Delete)：删除
>> * 使用数据库
>
> ###### DML(Data Manipulation Language)数据操作语言
>> 用来对数据库中表的数据进行增删改。关键字:insert，delete，update 等.
> 
> ###### DQL(Data Query Language)数据查询语言
>> 用来查询数据库中表的记录(数据)。关键字:select，where 等.
>
> ###### DCL(Data control Language)数据控制语言(了解)
>> 用来定义数据库的访问权限和安全级别，及创建用户。关键字GRANT， REVOKE 等.

##### 约束
* 概念： 对表中的数据进行限定，保证数据的正确性、有效性和完整性。
* 分类：
    * 主键约束：`primary key`
    * 非空约束：`not null`
    > 非空约束：`not null`，某一列的值不能为`null`
    * 唯一约束：`unique`
    * 外键约束：`foreign key`

##### 数据库设计
多表之间的关系
* 一对一(了解)：
    > * 如：人和身份证
    > * 分析：一个人只有一个身份证，一个身份证只能对应一个人
    >> * **实现方式**：一对一关系实现，可以在任意一方添加**唯一**外键指向另一方的主键。
* 一对多(多对一)：
    > * 如：部门和员工
    > * 分析：一个部门有多个员工，一个员工只能对应一个部门
    >> * **实现方式**：在多的一方建立外键，指向一的一方的主键。
* 多对多：
    > * 如：学生和课程
    > * 分析：一个学生可以选择很多门课程，一个课程也可以被很多学生选择
    >> * **实现方式**：多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键

数据库设计的范式
> *概念*：设计数据库时，需要遵循的一些规范。要遵循后边的范式要求，必须先遵循前边的所有范式要求
>
>设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。

目前关系数据库有六种范式：
 * 第一范式(1NF)
> 每一列都是不可分割的原子数据项
 * 第二范式(2NF)
> 在1NF的基础上，非码属性必须完全依赖于码（在1NF基础上消除非主属性对主码的部分函数依赖）
>
> * *函数依赖*：`A-->B`,如果通过A属性(属性组)的值，可以确定唯一B属性的值。则称B依赖于A
>>   例如：学号-->姓名。  （学号，课程名称） --> 分数
> * *完全函数依赖*：`A-->B`， 如果A是一个*属性组*，则B属性值的确定需要依赖于A属性组中*所有的属性值*。
>>   例如：（学号，课程名称）--> 分数 
>> 学号和课程名称都需要，才能确定分数
> * *部分函数依赖*：`A-->B`， 如果A是一个*属性组*，则B属性值的确定只需要依赖于A属性组中*某一些值*即可。
>>   例如：（学号，课程名称） -- > 姓名
>> 知道学号就可以确定姓名 (该属性组中的部分属性可以确定其属性值)
> * *传递函数依赖*：`A-->B, B-->C` . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性（属性组）的值可以确定唯一C属性的值，则称 C 传递函数依赖于A
>>   例如：学号-->系名，系名-->系主任
> * *码*：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码
>>   例如：该表中码为：（学号，课程名称）
>>   * *候选码*：能唯一标识某一元组的属性组称为候选码
>>   * *主码*：从候选码中任选一个，作为主码
>>   * *主属性*：码属性组中的所有属性
>>   * *非主属性*：除过码属性组的属性

 * 第三范式(3NF)
 * 巴斯-科德范式(BCNF)
 * 第四范式(4NF)
 * 第五范式(5NF，又称完美范式)

 ##### 事务
* 概念：如果一个包含多个步骤的业务操作，被事务管理，那么这些操作要么同时成功，要么同时失败。
* 事务提交的两种方式：
    * 自动提交：
        * mysql就是自动提交的
        * 一条DML(增删改)语句会自动提交一次事务。
    * 手动提交：
        * Oracle 数据库默认是手动提交事务
        * 需要先开启事务，再提交

##### 事务的四大特性:
**面试常考**：
> * 原子性（Atomicity）：事务是不可分割的最小操作单元，要么全部成功，要么全部失败。
> * 一致性（Consistency）：事务完成时，必须使所有的数据都保持一致状态。
> * 隔离性（Isolation）：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行。
> * 持久性（Durability）：事务一旦提交或回滚，它对数据库中的数据的改变就是永久的。

##### 并发事务问题:
*概念*：多个事务之间隔离的，相互独立的。但是如果多个事务操作同一批数据，则会引发一些问题，设置不同的隔离级别就可以解决这些问题。
> * 赃读：一个事务读到另外一个事务还没有提交的数据。
> * 不可重复读：一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读。
> * 幻读：一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据已经存在，好像出现了 "幻影"。